:root {
    --blood-red: #af0000;
    --blood-glow: #ff0000;
    --war-saffron: #ff6a00;
    --deep-void: #050505;
    --panel-bg: rgba(15, 0, 0, 0.82);
    --font-war: 'Impact', 'Arial Black', sans-serif;
    --transition-main: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* --- CORE RESET & PERFORMANCE --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    background-color: var(--deep-void);
    /* GPU-Safe Texture */
    background-image: 
        linear-gradient(45deg, #111 25%, transparent 25%), 
        linear-gradient(-45deg, #111 25%, transparent 25%), 
        linear-gradient(45deg, transparent 75%, #111 75%), 
        linear-gradient(-45deg, transparent 75%, #111 75%);
    background-size: 4px 4px;
    
    color: #eee;
    font-family: var(--font-war);
    height: 100vh;
    width: 100vw;
    display: flex;
    justify-content: center;
    align-items: center;
    
    /* Explicit Overflow Control */
    overflow-x: hidden;
    overflow-y: hidden;
}

/* Cinematic Vignette (Z-Index: 2) */
body::after {
    content: "";
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at center, transparent 20%, rgba(0,0,0,0.9) 100%);
    pointer-events: none;
    z-index: 2;
}

/* --- MENU CONTAINER (Z-Index: 10) --- */
#menu {
    position: relative;
    z-index: 10;
    text-align: center;
    background: var(--panel-bg);
    padding: clamp(1.5rem, 6vw, 3.5rem);
    border: 2px solid;
    border-image: linear-gradient(to bottom, #444, var(--blood-red), #444) 1;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 1);
    
    /* Modern Glassmorphism */
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    
    width: 90%;
    max-width: 500px;
    animation: menu-entry 0.6s ease-out forwards;
}

/* Backdrop Filter Fallback for older browsers */
@supports not (backdrop-filter: blur(10px)) {
    #menu {
        background: rgba(25, 0, 0, 0.98);
    }
}

/* --- DYNAMIC TITLE --- */
h1 {
    font-size: clamp(2.2rem, 12vw, 4.8rem);
    letter-spacing: clamp(4px, 1.5vw, 10px);
    color: var(--blood-red);
    text-shadow: 3px 3px 0px #000, 0 0 20px var(--blood-glow);
    margin-bottom: 2rem;
    transform: skew(-10deg);
    line-height: 0.9;
    user-select: none;
}

/* --- MODE BUTTONS (1P/2P) --- */
.mode-buttons {
    display: flex;
    gap: 12px;    margin-bottom: 1.5rem;
}

.mode-buttons button {
    flex: 1;
    background: #000;
    color: #888;
    border: 1px solid #333;
    padding: clamp(12px, 2.5vw, 18px);
    cursor: pointer;
    font-weight: bold;
    font-family: inherit;    font-size: clamp(0.85rem, 3vw, 1.1rem);
    transition: var(--transition-main);
    text-transform: uppercase;
}

.mode-buttons button:hover, 
.mode-buttons button:focus {
    color: #fff;
    border-color: var(--blood-red);
    background: rgba(139, 0, 0, 0.2);
    outline: none;
}

/* Active State for JS */
.mode-buttons button.active {
    background: var(--blood-red);
    color: white;
    box-shadow: 0 0 15px var(--blood-glow);
    border-color: var(--blood-glow);
}

/* --- ENTER WAR BUTTON (CTA) --- */
#startBtn {
    width: 100%;
    padding: clamp(16px, 4.5vw, 26px);
    font-size: clamp(1.3rem, 5vw, 2rem);
    font-family: inherit;
    font-weight: 900;
    text-transform: uppercase;
    background: linear-gradient(135deg, #8b0000 0%, #4a0000 100%);
    color: white;
    border: none;
    cursor: pointer;
    clip-path: polygon(5% 0%, 100% 0%, 95% 100%, 0% 100%);
    transition: var(--transition-main);
    touch-action: manipulation; /* Removes 300ms tap delay */
}

#startBtn:hover {
    transform: scale(1.04);
    filter: brightness(1.2);
    box-shadow: 0 0 30px var(--blood-glow), 0 0 60px rgba(255, 106, 0, 0.2);
}

#startBtn:active {
    transform: scale(0.96);
}

/* --- GAME CANVAS (Z-Index: 5) --- */
#gameCanvas {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #000;
    border: 4px solid #1a1a1a;
    z-index: 5;
    
    /* Hardware Acceleration Hint */
    will-change: transform;
    
    /* Pixel Art Optimization */
    image-rendering: -moz-crisp-edges;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    
    max-width: 100vw;
    max-height: 100vh;
    object-fit: contain;
}

/* --- ANIMATIONS --- */
@keyframes menu-entry {
    0% { opacity: 0; transform: translateY(40px) scale(0.9); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* --- DEVICE SPECIFIC OVERRIDES --- */

/* Landscape Mode for Mobile (Short Screens) */
@media (max-height: 450px) and (orientation: landscape) {
    #menu { padding: 1rem; }
    h1 { margin-bottom: 0.8rem; font-size: 1.8rem; }
    .mode-buttons { margin-bottom: 0.8rem; }
    #startBtn { padding: 10px; font-size: 1.1rem; }
}

/* Large Screens (4K/High Res) */
@media (min-width: 2000px) {
    #menu { max-width: 700px; }
}

/* Custom Scrollbar (In case content ever overflows) */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--deep-void); }
::-webkit-scrollbar-thumb { background: var(--blood-red); }
